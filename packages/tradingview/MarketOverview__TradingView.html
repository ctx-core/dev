{#if symbol && _present__array(tabs)}
	<iframe
		class="MarketOverview__TradingView {class}"
		title="{symbol}"
		src="https://tradingview.com/embed-widget/market-overview/{STR__query}#{STR__hash}"
		{width}
		{height}
		frameborder="0"
	></iframe>
	<slot></slot>
{/if}
<script>
	import { _present__array } from '@ctx-core/array/lib.js'
	export default {
		data() {
			return {
				class: '',
				locale: 'en',
				width: '100%',
				height: '100%',
				showChart: true,
				largeChartUrl: '',
				plotLineColorGrowing: 'rgba(60, 188, 152, 1)',
				plotLineColorFalling: 'rgba(255, 74, 104, 1)',
				gridLineColor: 'rgba(233, 233, 234, 1)',
				scaleFontColor: 'rgba(214, 216, 224, 1)',
				belowLineFillColorGrowing: 'rgba(60, 188, 152, 0.05)',
				belowLineFillColorFalling: 'rgba(255, 74, 104, 0.05)',
				symbolActiveColor: 'rgba(242, 250, 254, 1)',
				isTransparent: true,
				tabs: [],
				utm_source: typeof window === 'object' ? window.location.hostname : '',
				utm_medium: 'widget_new',
				utm_campaign: 'market-overview',
			}
		},
		computed: {
			STR__query: ({ locale }) => locale ? `?locale=${locale}` : '',
			params: (
				{
					width,
					height,
					showChart,
					largeChartUrl,
					plotLineColorGrowing,
					plotLineColorFalling,
					gridLineColor,
					scaleFontColor,
					belowLineFillColorGrowing,
					belowLineFillColorFalling,
					symbolActiveColor,
					tabs,
					utm_source,
					utm_medium,
					utm_campaign,
				}
			) => (
				{
					width,
					height,
					showChart,
					largeChartUrl,
					plotLineColorGrowing,
					plotLineColorFalling,
					gridLineColor,
					scaleFontColor,
					belowLineFillColorGrowing,
					belowLineFillColorFalling,
					symbolActiveColor,
					tabs,
					utm_source,
					utm_medium,
					utm_campaign,
				}
			),
			json__params: ({ params }) =>
				params && JSON.stringify(params),
			STR__hash: ({ json__params }) =>
				json__params && encodeURIComponent(json__params),
		},
		helpers: {
			_present__array,
		},
		methods: {
			_tab__default() {
				return [
					{
						title: 'Securities',
						symbols: [{ s: 'NASDAQ:AAPL', d: 'Apple' }],
						originalTitle: 'Securities'
					}
				]
			},
		},
	}
</script>