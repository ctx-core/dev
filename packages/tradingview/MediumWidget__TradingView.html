<script>
	/**
	 * To get the full graph, set:
	 * min-width: 300px
	 */
	// https://www.tradingview.com/mediumwidgetembed/?symbols=Apple&Apple=AAPL%20&locale=en&trendLineColor=%234bafe9&underLineColor=%23dbeffb&fontColor=%2383888D&gridLineColor=%23e9e9ea&chartOnly=1&width=200px&height=calc(120px%20-%2032px)&utm_source=www.tradingview.com&utm_medium=widget_new&utm_campaign=symbol-overview
	// See https://www.tradingview.com/widget/symbol-overview/
	import { assign } from '@ctx-core/object/lib.js'
	import { each, map__andand, _present__array } from '@ctx-core/array/lib.js'
	import { _STR__query } from '@ctx-core/uri/lib.js'
	import { _hostname } from '@ctx-core/dom/lib.js'
	export let class__ = $$props.class || ''
	export let title = ''
	export let locale = 'en'
	export let ARR__ARR__name__symbol = []
	export let trendLineColor = '#4bafe9'
	export let underLineColor = '#dbeffb'
	export let fontColor = '#83888D'
	export let gridLineColor = '#e9e9ea'
	export let chartOnly = ''
	export let width = '100%'
	export let height = '100%'
	export let utm_source = _hostname() || ''
	export let utm_medium = 'widget_new'
	export let utm_campaign = 'mini-symbol-overview'
	$: symbols = map__andand(ARR__ARR__name__symbol, '0')
	$: symbol__BY__name = _symbol__BY__name(ARR__ARR__name__symbol)
	$: query =
		assign({
			locale,
			symbols,
			trendLineColor,
			underLineColor,
			fontColor,
			gridLineColor,
			chartOnly,
			width,
			height,
			utm_source,
			utm_medium,
			utm_campaign,
		}, symbol__BY__name)
	$: STR__query = _STR__query(query)
	function _symbol__BY__name(ARR__ARR__name__symbol) {
		const symbol__BY__name = {}
		each(
			ARR__ARR__name__symbol,
			ARR__name__symbol =>
				symbol__BY__name[ARR__name__symbol[0]] = ARR__name__symbol[1])
		return symbol__BY__name
	}
</script>

{#if _present__array(ARR__ARR__name__symbol)}
	<iframe
		{title}
		class="MediumWidget__TradingView {class}"
		src="https://tradingview.com/mediumwidgetembed/{STR__query}"
		{width}
		{height}
		frameborder="0"
	></iframe>
	<slot></slot>
{/if}

