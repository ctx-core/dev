<html lang="en">
  <head>
    {{{$html__script__head__gtm(ctx)}}}
    {{{meta || ''}}}
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    {{#if styles}}
      {{{styles || ''}}}
    {{/if}}
    {{#if title}}
      <title>{{title}}</title>
    {{else}}
      <title>Default Title</title>
    {{/if}}
  </head>
  <body>
    {{{$html__script__body__gtm(ctx)}}}
    <slot></slot>
    <script src="{{env.URL__SHIM__CORE_JS}}"></script>
    {{{polyfill__fetch(ctx)}}}
    {{#if scripts}}
      {{{scripts}}}
    {{/if}}
    {{{html__script__load}}}
  </body>
</html>

<script type="buble">
  import env from 'ctx-core/env.mjs'
  import {$html__script__head__gtm
        , $html__script__body__gtm} from 'ctx-core/google/html.mjs'
  import {$html__script__load} from 'ctx-core/layout/html.mjs'
  import {polyfill__fetch} from 'ctx-core/fetch/polyfill.html.mjs'
  export default {
    data() {
      return {
        env
      }
    },
    computed: {
      ctx__onload: ctx =>
        (ctx && ctx.ctx__onload)
        || ctx,
      html__script__load: (ctx__onload, components__onload) =>
        $html__script__load(ctx__onload, components__onload)
    }
    helpers: {
      $html__script__head__gtm,
      $html__script__body__gtm,
      polyfill__fetch
    }
  }
</script>